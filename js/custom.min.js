function toggle_telefono_provincia_nazione(e){jQuery("#JS-MYEP-input-nazione-"+e).length&&("IT"!=jQuery("#JS-MYEP-input-nazione-"+e).val()?(jQuery("#JS-MYEP-input-telefono-"+e).prop("required",!0),jQuery("#JS-MYEP-input-provincia-"+e).prop("required",!1),jQuery("#JS-MYEP-col-provincia-"+e).hide()):(jQuery("#JS-MYEP-input-telefono-"+e).prop("required",!1),jQuery("#JS-MYEP-input-provincia-"+e).prop("required",!0),jQuery("#JS-MYEP-col-provincia-"+e).show()))}function check_cap(e){if("IT"!=jQuery("#JS-MYEP-input-nazione-"+e).val())jQuery("#JS-MYEP-cap-hidden-associato-"+e).val("ok"),jQuery("#JS-MYEP-cap-hidden-associato-"+e).trigger("change");else if(""!=jQuery("#JS-MYEP-input-nazione-"+e).val()){var i=jQuery.ajax({url:"admin-ajax.php?action=MYEP-check-cap",method:"POST",data:{CAP:jQuery("#JS-MYEP-input-cap-"+e).val()},dataType:"html"});i.done(function(i){1==i?(jQuery("#JS-MYEP-cap-hidden-associato-"+e).val("ok"),jQuery("#JS-MYEP-cap-hidden-associato-"+e).trigger("change")):(jQuery("#JS-MYEP-cap-hidden-associato-"+e).val(0),jQuery("#JS-MYEP-cap-hidden-associato-"+e).trigger("change"))}),i.fail(function(e,i){})}}function assicurazione_toggle(){if(jQuery("#JS-MYEP-toogle-assicurazione").length)if(jQuery("#JS-MYEP-toogle-assicurazione").is(":checked")){var e=jQuery("#JS-MYEP-input-nazione-destinatario").val();"IT"==e||""==e?jQuery("#JS-MYEP-input-assicurazione-valore").attr("max",2500):jQuery("#JS-MYEP-input-assicurazione-valore").attr("max",1500),jQuery("#JS-MYEP-col-assicurazione").show(),jQuery("#JS-MYEP-input-assicurazione-valore").prop("required",!0)}else jQuery("#JS-MYEP-col-assicurazione").hide(),jQuery("#JS-MYEP-input-assicurazione-valore").prop("required",!1)}function contrassegno_toggle(){if(jQuery("#JS-MYEP-toogle-contrassegno").length){var e=jQuery("#JS-MYEP-input-nazione-destinatario").val();"IT"==e||""==e?(jQuery("#JS-MYEP-col-contrassegno-main").show(),jQuery("#JS-MYEP-toogle-contrassegno").is(":checked")?(jQuery("#JS-MYEP-col-contrassegno-1").show(),jQuery("#JS-MYEP-col-contrassegno-2").show(),jQuery("#JS-MYEP-col-contrassegno-3").show(),jQuery("#JS-MYEP-input-contrassegno-valore").prop("required",!0),jQuery("#JS-MYEP-input-contrassegno-beneficiario").prop("required",!0),jQuery("#JS-MYEP-input-contrassegno-iban").prop("required",!0)):(jQuery("#JS-MYEP-col-contrassegno-1").hide(),jQuery("#JS-MYEP-col-contrassegno-2").hide(),jQuery("#JS-MYEP-col-contrassegno-3").hide(),jQuery("#JS-MYEP-input-contrassegno-valore").prop("required",!1),jQuery("#JS-MYEP-input-contrassegno-beneficiario").prop("required",!1),jQuery("#JS-MYEP-input-contrassegno-iban").prop("required",!1))):jQuery("#JS-MYEP-col-contrassegno-main").hide()}}function check_accessori_possibili(){if(""!=jQuery("#JS-MYEP-input-nazione-mittente").val()&&""!=jQuery("#JS-MYEP-input-nazione-destinatario").val()&&""!=jQuery("#JS-MYEP-input-citta-mittente").val()&&""!=jQuery("#JS-MYEP-input-citta-destinatario").val()){var e=jQuery.ajax({url:"admin-ajax.php?action=MYEP-check-accessori-possibili",method:"POST",data:{MITTENTE_NAZIONE:jQuery("#JS-MYEP-input-nazione-mittente").val(),DESTINATARIO_NAZIONE:jQuery("#JS-MYEP-input-nazione-destinatario").val(),MITTENTE_CITTA:jQuery("#JS-MYEP-input-citta-mittente").val(),DESTINATARIO_CITTA:jQuery("#JS-MYEP-input-citta-destinatario").val()},dataType:"html"});e.done(function(e){azzera_time_definite(),"111"==e?(jQuery(".JS-MYEP-accessori-base").show(),jQuery(".JS-MYEP-accessori-timedefinite").show()):"110"==e?(jQuery(".JS-MYEP-accessori-base").show(),jQuery(".JS-MYEP-accessori-timedefinite").hide()):(jQuery(".JS-MYEP-accessori-base").hide(),jQuery(".JS-MYEP-accessori-timedefinite").hide())}),e.fail(function(e,i){})}}function time_definite_toggle(){jQuery("#JS-MYEP-input-accessorio-entrole10").is(":checked")?(jQuery("#JS-MYEP-input-accessorio-entrole12").prop("disabled",!0),jQuery("#JS-MYEP-input-accessorio-disera").prop("disabled",!0),jQuery("#JS-MYEP-input-accessorio-suappuntamento").prop("disabled",!0)):jQuery("#JS-MYEP-input-accessorio-entrole12").is(":checked")?(jQuery("#JS-MYEP-input-accessorio-entrole10").prop("disabled",!0),jQuery("#JS-MYEP-input-accessorio-disera").prop("disabled",!0),jQuery("#JS-MYEP-input-accessorio-suappuntamento").prop("disabled",!0)):jQuery("#JS-MYEP-input-accessorio-disera").is(":checked")?(jQuery("#JS-MYEP-input-accessorio-entrole10").prop("disabled",!0),jQuery("#JS-MYEP-input-accessorio-entrole12").prop("disabled",!0),jQuery("#JS-MYEP-input-accessorio-suappuntamento").prop("disabled",!0)):jQuery("#JS-MYEP-input-accessorio-suappuntamento").is(":checked")?(jQuery("#JS-MYEP-input-accessorio-entrole10").prop("disabled",!0),jQuery("#JS-MYEP-input-accessorio-entrole12").prop("disabled",!0),jQuery("#JS-MYEP-input-accessorio-disera").prop("disabled",!0)):(jQuery("#JS-MYEP-input-accessorio-entrole10").prop("disabled",!1),jQuery("#JS-MYEP-input-accessorio-entrole12").prop("disabled",!1),jQuery("#JS-MYEP-input-accessorio-disera").prop("disabled",!1),jQuery("#JS-MYEP-input-accessorio-suappuntamento").prop("disabled",!1))}function azzera_time_definite(){jQuery(".time-definite-toggle").each(function(){jQuery(this).attr("checked",!1),jQuery(this).attr("disabled",!1)})}function check_perimetro(){if(jQuery("#JS-MYEP-input-perimetro").length){var e=+jQuery("#JS-MYEP-input-altezza").val(),i=+jQuery("#JS-MYEP-input-larghezza").val(),o=+jQuery("#JS-MYEP-input-lunghezza").val(),r=e+i+o;r>150?jQuery("#JS-MYEP-div-perimetro").show():jQuery("#JS-MYEP-div-perimetro").hide(),jQuery("#JS-MYEP-input-perimetro").val(r),jQuery("#JS-MYEP-input-perimetro").trigger("change")}}function valore_dichiarato(e){jQuery("#JS-MYEP-input-nazione-"+e).length&&("IT"!=jQuery("#JS-MYEP-input-nazione-"+e).val()?jQuery("#JS-MYEP-input-valore").prop("required",!0):jQuery("#JS-MYEP-input-valore").prop("required",!1))}jQuery(window).on("load",function(){jQuery("#JS-MYEP-input-cap-mittente").length&&""!=jQuery("#JS-MYEP-input-cap-mittente").val()&&check_cap("mittente"),jQuery("#JS-MYEP-input-cap-destinatario").length&&""!=jQuery("#JS-MYEP-input-cap-destinatario").val()&&check_cap("destinatario"),toggle_telefono_provincia_nazione("destinatario"),contrassegno_toggle(),assicurazione_toggle()}),jQuery(document).ready(function(){jQuery("#JS-MYEP-opzioni-ricerca-storico").click(function(){"none"==jQuery("#JS-MYEP-opzioni_ricerca").css("display")?(jQuery("#JS-MYEP-opzioni_ricerca").show(),jQuery("#JS-MYEP-opzioni-ricerca-storico").html("Nascondi opzioni ricerca")):(jQuery("#JS-MYEP-opzioni_ricerca").hide(),jQuery("#JS-MYEP-opzioni-ricerca-storico").html("Mostra opzioni ricerca"))}),jQuery(".JS-MYEP-somma-perimetro").change(function(){check_perimetro()}),jQuery("#JS-MYEP-input-cap-mittente").change(function(){check_cap("mittente")}),jQuery("#JS-MYEP-input-cap-destinatario").change(function(){check_cap("destinatario")}),jQuery("#JS-MYEP-input-nazione-mittente").change(function(){check_accessori_possibili()}),jQuery("#JS-MYEP-input-nazione-destinatario").change(function(){toggle_telefono_provincia_nazione("destinatario"),check_cap("destinatario"),contrassegno_toggle(),assicurazione_toggle(),check_accessori_possibili(),valore_dichiarato("destinatario")}),jQuery("#JS-MYEP-input-citta-mittente").change(function(){check_accessori_possibili()}),jQuery("#JS-MYEP-input-citta-destinatario").change(function(){check_accessori_possibili()}),jQuery("#JS-MYEP-toogle-assicurazione").change(function(){assicurazione_toggle()}),jQuery("#JS-MYEP-toogle-contrassegno").change(function(){contrassegno_toggle()}),jQuery(".time-definite-toggle").click(function(){time_definite_toggle()}),jQuery("#JS-MYEP-input-accessorio-suappuntamento").change(function(){jQuery("#JS-MYEP-input-accessorio-suappuntamento").is(":checked")?jQuery("#JS-MYEP-input-telefono-destinatario").prop("required",!0):"IT"==jQuery("#JS-MYEP-input-nazione-destinatario").val()||""==jQuery("#JS-MYEP-input-nazione-destinatario").val()?jQuery("#JS-MYEP-input-telefono-destinatario").prop("required",!1):jQuery("#JS-MYEP-input-telefono-destinatario").prop("required",!0)}),jQuery(".JS-MYEP-invio-form-spedizione").click(function(){jQuery("#JS-MYEP-tipo-spedizione-form").val(jQuery(this).val()),jQuery("#JS-MYEP-form-spedizione").submit()}),jQuery("#JS-MYEP-form-spedizione").validator().on("submit",function(e){if(e.isDefaultPrevented()===!1){if(e.preventDefault(),"calcola-spedizione"==jQuery("#JS-MYEP-input-azione-form").val()){var i=jQuery.ajax({url:"admin-ajax.php?action=MYEP-calcola-spedizione",method:"POST",data:jQuery("#JS-MYEP-form-spedizione").serialize(),dataType:"html"});i.done(function(e){var i=e.split("#");i[1]>0&&(jQuery("#JS-MYEP-div-costo-express").show(),jQuery("#JS-MYEP-div-costo-express span").html(i[1]),jQuery("#JS-MYEP-errore-campi").hide(),jQuery("#JS-MYEP-errore-calcola-spedizione").hide(),jQuery("#JS-MYEP-button-calcola-spedizione").hide(),jQuery("#JS-MYEP-input-azione-form").val("aggiungi-a-carrello")),i[2]>0&&(jQuery("#JS-MYEP-div-costo-economy").show(),jQuery("#JS-MYEP-errore-campi").hide(),jQuery("#JS-MYEP-errore-calcola-spedizione").hide(),jQuery("#JS-MYEP-button-calcola-spedizione").hide(),jQuery("#JS-MYEP-div-costo-economy span").html(i[2]),jQuery("#JS-MYEP-input-azione-form").val("aggiungi-a-carrello"))}),i.fail(function(e,i){jQuery("#JS-MYEP-errore-calcola-spedizione").show(),console.log("Request failed: "+i)})}else if("aggiungi-a-carrello"==jQuery("#JS-MYEP-input-azione-form").val()){var i=jQuery.ajax({url:"admin-ajax.php?action=MYEP-aggiungi-a-carrello",method:"POST",data:jQuery("#JS-MYEP-form-spedizione").serialize(),dataType:"html"});i.done(function(e){""!=e?(jQuery("#JS-MYEP-div-errore-a-carrello").hide(),jQuery("#JS-MYEP-div-main-crea-spedizione").hide(),jQuery("#JS-MYEP-div-aggiunta-a-carrello").show()):(jQuery("#JS-MYEP-div-aggiunta-a-carrello").hide(),jQuery("#JS-MYEP-div-main-crea-spedizione").show(),jQuery("#JS-MYEP-div-errore-a-carrello").show())}),i.fail(function(e,i){jQuery("#JS-MYEP-div-errore-a-carrello").show(),console.log("Request failed: "+i)})}}else e.preventDefault(),jQuery("#JS-MYEP-div-costo-express").hide(),jQuery("#JS-MYEP-div-costo-economy").hide(),jQuery("#JS-MYEP-errore-calcola-spedizione").hide(),jQuery("#JS-MYEP-errore-campi").show(),jQuery("#JS-MYEP-button-calcola-spedizione").show()}),jQuery("#JS-MYEP-form-spedizione").on("keyup change","input, select, textarea",function(){jQuery("#JS-MYEP-input-azione-form").val("calcola-spedizione"),jQuery("#JS-MYEP-div-costo-express").hide(),jQuery("#JS-MYEP-div-costo-economy").hide(),jQuery("#JS-MYEP-div-errore-a-carrello").hide(),jQuery("#JS-MYEP-errore-campi").hide(),jQuery("#JS-MYEP-button-calcola-spedizione").show()}),jQuery(".JS-MYEP-button-dettagli-spedizione").click(function(){var e=jQuery(this).val();if("none"==jQuery("#JS-DIV-DETTAGLI-SPEDIZIONE-"+e).css("display"))if(""!=e&&0==jQuery("#JS-DIV-DETTAGLI-SPEDIZIONE-"+e+" .MYEP-card-block").length){var i=jQuery.ajax({url:"admin-ajax.php?action=MYEP-dettagli-spedizione",method:"POST",data:{ID_SPEDIZIONE:e},dataType:"html"});i.done(function(i){jQuery("#JS-DETTAGLI-SPEDIZIONE-"+e).html(i),jQuery("#JS-DIV-DETTAGLI-SPEDIZIONE-"+e).show()}),i.fail(function(e,i){console.log("Request failed: "+i)})}else jQuery("#JS-DIV-DETTAGLI-SPEDIZIONE-"+e).show();else jQuery("#JS-DIV-DETTAGLI-SPEDIZIONE-"+e).hide()}),jQuery("#JS-carrello-conferma-spedizioni").click(function(){var e=jQuery.ajax({url:"admin-ajax.php?action=MYEP-conferma-carrello",method:"POST",data:jQuery("#JS-MYEP-form-conferma-carrello").serialize(),dataType:"html"});e.done(function(e){var e="OK";jQuery("#JS-MYEP-errore-credito-insufficente").hide(),jQuery("#JS-MYEP-errore-conferma-carrello").hide(),"OK"==e?(jQuery("#JS-MYEP-MAIN-DIV-CONFERMA-CARRELLO").hide(),jQuery("#JS-MYEP-DIV-OK-CARRELLO").show()):"credito_insufficente"==e?jQuery("#JS-MYEP-errore-credito-insufficente").show():jQuery("#JS-MYEP-errore-conferma-carrello").show()}),e.fail(function(e,i){console.log("Request failed: "+i)})}),jQuery(".JS-MYEP-button-tracking-spedizione").click(function(){var e=jQuery(this).val();if("none"==jQuery("#JS-DIV-TRACKING-SPEDIZIONE-"+e).css("display"))if(""!=e&&0==jQuery("#JS-DIV-TRACKING-SPEDIZIONE-"+e+" table").length){var i=jQuery.ajax({url:"admin-ajax.php?action=MYEP-tracking-spedizione",method:"POST",data:{ID_SPEDIZIONE:e},dataType:"html"});i.done(function(i){jQuery("#JS-TRACKING-SPEDIZIONE-"+e).html(i),jQuery("#JS-DIV-TRACKING-SPEDIZIONE-"+e).show()}),i.fail(function(e,i){console.log("Request failed: "+i)})}else jQuery("#JS-DIV-TRACKING-SPEDIZIONE-"+e).show();else jQuery("#JS-DIV-TRACKING-SPEDIZIONE-"+e).hide()})});